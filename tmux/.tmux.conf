# Support mouse options under tmux <2.1
if-shell -b '[ "$(echo "$TMUX_VERSION < 2.1" | bc)" = 1 ]' \
  'set -g mouse-select-pane on; set -g mode-mouse on; \
   set -g mouse-resize-pane on; set -g mouse-select-window on'
# Support mouse options under tmux >=2.1
if-shell -b '[ "$(echo "$TMUX_VERSION >= 2.1" | bc)" = 1 ]' \
  'set -g mouse on'

# Support utf-8 under tmux <2.2 (automatic under >=2.2)
if-shell -b '[ "$(echo "$TMUX_VERSION < 2.2" | bc)" = 1 ]' \
  'set -f utf8 on; set -g status-utf8 on; set -g mouse-utf8 on'

# Rebind prefix
unbind C-b
set -g prefix C-Space
bind Space send-prefix

set -g default-terminal "screen-256color"

# Split panes using \ and -
set-environment -g CHERE_INVOKING 1 # pane_current_path fix for windows
bind \ split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %
bind c new-window -c "#{pane_current_path}"
bind C-l send-keys -R \; clear-history \; send-keys 'C-l' \;

# Reload config file
bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

# Vim style pane selection
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Use ctrl keys and hjkl without prefix key to move panes
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# Use ctrl keys and arrows without prefix key to resize panes
bind -n C-Right resize-pane -R 5
bind -n C-Left  resize-pane -L 5
bind -n C-Up    resize-pane -U 5
bind -n C-Down  resize-pane -D 5

# Don't rename windows automatically
set -g allow-rename off

source ~/.tmux-colours.conf

# Load user-defined overrides only if file exists
if-shell '[ -f ~/.tmux.conf.local ]' 'source-file ~/.tmux.conf.local'

